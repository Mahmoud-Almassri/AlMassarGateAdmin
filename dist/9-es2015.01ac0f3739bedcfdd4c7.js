(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{qRGw:function(e,t,o){"use strict";o.r(t),o.d(t,"EmployeeManagementModule",(function(){return pe}));var i=o("ofXK"),r=o("tk/3"),a=o("3Pt+"),n=o("bTqV"),s=o("FKr1"),l=o("0IaG"),c=o("kmnG"),b=o("NFeN"),m=o("qFsG"),d=o("M9IT"),u=o("d3UM"),p=o("+0xr"),h=o("Qu3c"),f=o("tyNb"),S=o("gmcq"),g=o("inyj"),y=o("Jxek"),T=o("SOzR"),v=o("fXoL"),w=o("JqCM");function B(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function N(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function F(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function C(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function k(e,t){if(1&e&&(v.Tb(0,"mat-option",27),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.kc("value",e.id),v.Bb(1),v.Dc("",e.name," ")}}function A(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function I(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}let E=(()=>{class e{constructor(e,t,o,i){this.baseService=e,this.notificationService=t,this.spinner=o,this.router=i,this.roles=[],this.registForm=new a.g({userName:new a.d("",a.u.required),fullName:new a.d("",a.u.required),phoneNumber:new a.d("",[a.u.required]),email:new a.d("",[a.u.required,a.u.email]),password:new a.d("",[a.u.required,a.u.minLength(6)]),roleId:new a.d(1,a.u.required),address:new a.d("")})}ngOnInit(){this.getRoles()}getFormControlByName(e){return this.registForm.get(e)}getRoles(){this.baseService.getEmployeesRoles().subscribe(e=>{this.roles=e.filter(e=>"User"!=e.name)})}submitForm(){if(this.registForm.invalid)this.registForm.markAllAsTouched(),this.notificationService.showNotification("Please Check Form Fields","warning");else{this.spinner.show();const e=this.registForm.getRawValue();this.baseService.registEmployee(e).subscribe(e=>{this.spinner.hide(),this.notificationService.showNotification("Employee Created Successfully","success"),this.router.navigate(["/employees-management/list-employees"])},e=>{this.notificationService.showNotification(400===e.status?e.error.Message:"Something went wrong please contact system admin","danger"),this.spinner.hide()})}}restForm(){this.registForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(v.Nb(T.a),v.Nb(y.a),v.Nb(w.c),v.Nb(f.d))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-add-employee"]],decls:64,vars:9,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-primary"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[3,"formGroup"],[1,"col"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","fullName","placeholder","Full Name"],[4,"ngIf"],["matInput","","formControlName","email","placeholder","example@email.com"],[1,"col","align-self-center"],["matInput","","formControlName","phoneNumber","placeholder","phone Number"],["matInput","","formControlName","address","placeholder","Address"],["matInput","","formControlName","userName","placeholder","user name"],["appearance","outline"],["formControlName","roleId"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","align-self-center"],["matInput","","type","password","formControlName","password","placeholder","Password"],[1,"col-lg-12"],["mat-raised-button","",1,"btn","btn-primary","pull-right",2,"margin","1px",3,"disabled","click"],["mat-raised-button","",1,"btn","btn-danger","pull-right",2,"margin","1px",3,"click"],[3,"value"]],template:function(e,t){1&e&&(v.Tb(0,"div",0),v.Tb(1,"div",1),v.Tb(2,"div",2),v.Tb(3,"div",3),v.Tb(4,"div",4),v.Tb(5,"div",5),v.Tb(6,"h3",6),v.Bc(7,"Create New Employee"),v.Sb(),v.Tb(8,"p",7),v.Bc(9," Employees Management"),v.Sb(),v.Sb(),v.Tb(10,"div",8),v.Tb(11,"form",9),v.Tb(12,"div",2),v.Tb(13,"div",10),v.Tb(14,"mat-form-field",11),v.Tb(15,"mat-label"),v.Bc(16,"Employee Full Name"),v.Sb(),v.Ob(17,"input",12),v.Ac(18,B,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Tb(19,"div",10),v.Tb(20,"mat-form-field",11),v.Tb(21,"mat-label"),v.Bc(22,"Email Address"),v.Sb(),v.Ob(23,"input",14),v.Ac(24,N,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Sb(),v.Tb(25,"div",2),v.Tb(26,"div",15),v.Tb(27,"mat-form-field",11),v.Tb(28,"mat-label"),v.Bc(29,"Phone Number"),v.Sb(),v.Ob(30,"input",16),v.Ac(31,F,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Tb(32,"div",10),v.Tb(33,"mat-form-field",11),v.Tb(34,"mat-label"),v.Bc(35,"Address "),v.Sb(),v.Ob(36,"input",17),v.Sb(),v.Sb(),v.Sb(),v.Tb(37,"div",2),v.Tb(38,"div",15),v.Tb(39,"mat-form-field",11),v.Tb(40,"mat-label"),v.Bc(41,"User Name"),v.Sb(),v.Ob(42,"input",18),v.Ac(43,C,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Tb(44,"div",10),v.Tb(45,"mat-form-field",19),v.Tb(46,"mat-label"),v.Bc(47,"Role"),v.Sb(),v.Tb(48,"mat-select",20),v.Ac(49,k,2,2,"mat-option",21),v.Sb(),v.Ac(50,A,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Sb(),v.Tb(51,"div",2),v.Tb(52,"div",22),v.Tb(53,"mat-form-field",11),v.Tb(54,"mat-label"),v.Bc(55,"Password"),v.Sb(),v.Ob(56,"input",23),v.Ac(57,I,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Sb(),v.Tb(58,"div",2),v.Tb(59,"div",24),v.Tb(60,"button",25),v.ac("click",(function(){return t.submitForm()})),v.Bc(61,"Add"),v.Sb(),v.Tb(62,"button",26),v.ac("click",(function(){return t.restForm()})),v.Bc(63,"Rest"),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb()),2&e&&(v.Bb(11),v.kc("formGroup",t.registForm),v.Bb(7),v.kc("ngIf",t.getFormControlByName("fullName").touched&&t.getFormControlByName("fullName").invalid),v.Bb(6),v.kc("ngIf",t.getFormControlByName("email").touched&&t.getFormControlByName("email").invalid),v.Bb(7),v.kc("ngIf",t.getFormControlByName("phoneNumber").touched&&t.getFormControlByName("phoneNumber").invalid),v.Bb(12),v.kc("ngIf",t.getFormControlByName("userName").touched&&t.getFormControlByName("userName").invalid),v.Bb(6),v.kc("ngForOf",t.roles),v.Bb(1),v.kc("ngIf",t.getFormControlByName("roleId").touched&&t.getFormControlByName("roleId").invalid),v.Bb(7),v.kc("ngIf",t.getFormControlByName("password").touched&&t.getFormControlByName("password").invalid),v.Bb(3),v.kc("disabled",t.registForm.invalid))},directives:[a.v,a.p,a.h,c.c,c.f,m.b,a.c,a.o,a.f,i.l,u.a,i.k,n.b,c.b,s.n],styles:["form[_ngcontent-%COMP%]{overflow-x:hidden}"]}),e})();var R=o("Dh3D"),D=o("6osZ"),O=o("62t3"),q=o("P8U+");function P(e,t){if(1&e&&(v.Tb(0,"mat-option",15),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.kc("value",e.id),v.Bb(1),v.Dc(" ",e.name," ")}}function x(e,t){1&e&&(v.Tb(0,"th",36),v.Bc(1," Name "),v.Sb())}function M(e,t){if(1&e&&(v.Tb(0,"td",37),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.Bb(1),v.Dc(" ",e.fullName," ")}}function $(e,t){1&e&&(v.Tb(0,"th",36),v.Bc(1," UserName "),v.Sb())}function U(e,t){if(1&e&&(v.Tb(0,"td",37),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.Bb(1),v.Dc(" ",e.userName," ")}}function L(e,t){1&e&&(v.Tb(0,"th",36),v.Bc(1," Email "),v.Sb())}function V(e,t){if(1&e&&(v.Tb(0,"td",37),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.Bb(1),v.Dc(" ",e.email," ")}}function G(e,t){1&e&&(v.Tb(0,"th",36),v.Bc(1," Phone Number "),v.Sb())}function Q(e,t){if(1&e&&(v.Tb(0,"td",37),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.Bb(1),v.Dc(" ",e.phoneNumber," ")}}function z(e,t){1&e&&(v.Tb(0,"th",36),v.Bc(1," Status "),v.Sb())}function H(e,t){if(1&e&&(v.Tb(0,"td",37),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.Bb(1),v.Dc(" ",e.isActive?"Active":"In Active"," ")}}function _(e,t){1&e&&(v.Tb(0,"th",36),v.Bc(1," Actions "),v.Sb())}function j(e,t){if(1&e){const e=v.Ub();v.Tb(0,"button",42),v.ac("click",(function(){v.rc(e);const t=v.ec().$implicit;return v.ec().updateEmployeeStatus(t,!1)})),v.Tb(1,"mat-icon"),v.Bc(2,"block"),v.Sb(),v.Sb()}}function J(e,t){if(1&e){const e=v.Ub();v.Tb(0,"button",43),v.ac("click",(function(){v.rc(e);const t=v.ec().$implicit;return v.ec().updateEmployeeStatus(t,!0)})),v.Tb(1,"mat-icon"),v.Bc(2,"check"),v.Sb(),v.Sb()}}function K(e,t){if(1&e){const e=v.Ub();v.Tb(0,"td",37),v.Ac(1,j,3,0,"button",38),v.Ac(2,J,3,0,"button",39),v.Tb(3,"button",40),v.ac("click",(function(){v.rc(e);const o=t.$implicit;return v.ec().delete(o.id)})),v.Tb(4,"mat-icon"),v.Bc(5,"delete_forever"),v.Sb(),v.Sb(),v.Tb(6,"button",41),v.ac("click",(function(){v.rc(e);const o=t.$implicit;return v.ec().editItem(o.id)})),v.Tb(7,"mat-icon"),v.Bc(8,"create"),v.Sb(),v.Sb(),v.Sb()}if(2&e){const e=t.$implicit;v.Bb(1),v.kc("ngIf",e.isActive),v.Bb(1),v.kc("ngIf",!e.isActive)}}function X(e,t){1&e&&v.Ob(0,"tr",44)}function W(e,t){1&e&&v.Ob(0,"tr",45)}function Z(e,t){1&e&&(v.Tb(0,"tr",46),v.Tb(1,"td",47),v.Bc(2,"No data matching the filter "),v.Sb(),v.Sb())}const Y=function(){return["/employees-management/create-new-employee"]};function ee(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function te(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function oe(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function ie(e,t){1&e&&(v.Tb(0,"mat-error"),v.Bc(1," This field is required *"),v.Sb())}function re(e,t){if(1&e&&(v.Tb(0,"mat-option",33),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.kc("value",e.id),v.Bb(1),v.Cc(e.name)}}function ae(e,t){1&e&&(v.Tb(0,"th",34),v.Bc(1," User "),v.Sb())}function ne(e,t){if(1&e&&(v.Tb(0,"td",35),v.Bc(1),v.Sb()),2&e){const e=t.$implicit;v.Bb(1),v.Dc(" ",null==e?null:e.userId," ")}}function se(e,t){1&e&&(v.Tb(0,"th",34),v.Bc(1," Role "),v.Sb())}function le(e,t){if(1&e&&(v.Tb(0,"td",35),v.Bc(1),v.Sb()),2&e){const e=t.$implicit,o=v.ec();v.Bb(1),v.Dc(" ",o.getRoleNameById(null==e?null:e.roleId)," ")}}function ce(e,t){1&e&&(v.Tb(0,"th",34),v.Bc(1," Actions "),v.Sb())}function be(e,t){if(1&e){const e=v.Ub();v.Tb(0,"td",35),v.Tb(1,"button",36),v.ac("click",(function(){v.rc(e);const o=t.$implicit;return v.ec().removeEmployeeRoles(o.userId,o.roleId)})),v.Tb(2,"mat-icon"),v.Bc(3,"delete_forever"),v.Sb(),v.Sb(),v.Sb()}}function me(e,t){1&e&&v.Ob(0,"tr",37)}function de(e,t){1&e&&v.Ob(0,"tr",38)}const ue=[{component:(()=>{class e{constructor(e,t,o,i,r){this.baseService=e,this.spinner=t,this.yesNoDialog=o,this.router=i,this.notification=r,this.displayedColumns=["name","userName","phoneNumber","email","isActive","actions"],this.loockupsStatuses=D.b,this.employeesList=[],this.roles=[],this.filterForm=new a.g({roleType:new a.d,isActive:new a.d,searchValue:new a.d,pageNumber:new a.d(1),pageSize:new a.d(100)})}ngOnInit(){this.listEmployees(),this.getRoles()}getRoles(){this.baseService.getEmployeesRoles().subscribe(e=>{this.roles=e.filter(e=>"User"!=e.name)})}listEmployees(){this.spinner.show(),this.baseService.getList(O.b.Employee,this.filterForm.value).subscribe(e=>{this.employeesList=e.entities,this.totalCount=e.totalCount,this.dataSource=new p.l(this.employeesList),this.dataSource.sort=this.sort,this.spinner.hide()})}changePage(e){this.getFilterFormControlByName("pageNumber").setValue(e.pageIndex+1),this.getFilterFormControlByName("pageSize").setValue(e.pageSize),this.listEmployees()}getFilterFormControlByName(e){return this.filterForm.get(e)}editItem(e){this.router.navigate(["/employees-management/view-edit-employees/"+e])}applyFilter(){this.listEmployees()}updateEmployeeStatus(e,t){e.isActive=t,this.baseService.updateEmployeeInfo(e).subscribe(e=>{this.notification.showNotification("Employee Status Modified Successfully","success"),this.listEmployees()},e=>{console.log(e),this.notification.showNotification(400===e.status?e.error.Message:"Something went wrong please contact system admin","danger"),this.spinner.hide()})}delete(e){this.yesNoDialog.open(q.a,{maxWidth:"400px",data:{title:"Delete Employee",content:"Are you sure?"}}).afterClosed().subscribe(t=>{t&&(this.spinner.show(),this.baseService.removeItem(O.b.Employee,e).subscribe(e=>{this.notification.showNotification("Employee Deleted Successfully","success"),this.listEmployees()},e=>{this.spinner.hide(),this.notification.showNotification(400===e.status?e.error.Message:"Something went wrong please contact system admin","danger")}))})}deleteItemFromList(e){this.employeesList=this.employeesList.filter(t=>t.id!==e)}restFilter(){this.filterForm.reset(),this.filterForm.get("pageNumber").setValue(1),this.filterForm.get("pageSize").setValue(10),this.listEmployees()}}return e.\u0275fac=function(t){return new(t||e)(v.Nb(T.a),v.Nb(w.c),v.Nb(l.b),v.Nb(f.d),v.Nb(y.a))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-list-employees"]],viewQuery:function(e,t){var o;1&e&&(v.Ec(d.a,!0),v.Ec(R.a,!0)),2&e&&(v.oc(o=v.bc())&&(t.paginator=o.first),v.oc(o=v.bc())&&(t.sort=o.first))},decls:73,vars:13,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-primary"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[3,"formGroup"],[1,"background"],[1,"col"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","searchValue","placeholder","Name , UserName , Email , Phone Number ..."],["formControlName","isActive","name","status"],[3,"value"],["formControlName","roleType","name","roleType"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",1,"btn","btn-primary","pull-right",2,"margin","1px",3,"click"],["mat-raised-button","",1,"btn","btn-primary","pull-right",2,"margin","1px",3,"routerLink"],[1,"clearfix"],[1,"table-responsive"],[1,"mat-elevation-z8","w-100"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","email"],["matColumnDef","phoneNumber"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["class","data-row","mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"length","pageIndex","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","btn btn-warning m-2","mat-icon-button","","aria-label","Deactivate",3,"click",4,"ngIf"],["class","btn btn-success m-2","mat-icon-button","","aria-label","Activate",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Deactivate",1,"btn","btn-danger","m-2",3,"click"],["mat-icon-button","","aria-label","Edit",1,"btn","btn-primary","m-2",3,"click"],["mat-icon-button","","aria-label","Deactivate",1,"btn","btn-warning","m-2",3,"click"],["mat-icon-button","","aria-label","Activate",1,"btn","btn-success","m-2",3,"click"],["mat-header-row",""],["mat-row","",1,"data-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,t){1&e&&(v.Tb(0,"div",0),v.Tb(1,"div",1),v.Tb(2,"div",2),v.Tb(3,"div",3),v.Tb(4,"div",4),v.Tb(5,"div",5),v.Tb(6,"h3",6),v.Bc(7,"Employees"),v.Sb(),v.Tb(8,"p",7),v.Bc(9," Employees Management"),v.Sb(),v.Sb(),v.Tb(10,"div",8),v.Tb(11,"form",9),v.Tb(12,"h4",10),v.Tb(13,"span"),v.Bc(14),v.Sb(),v.Sb(),v.Tb(15,"div",2),v.Tb(16,"div",11),v.Tb(17,"mat-form-field",12),v.Tb(18,"mat-label"),v.Bc(19,"Filter By Text"),v.Sb(),v.Ob(20,"input",13),v.Sb(),v.Sb(),v.Tb(21,"div",11),v.Tb(22,"mat-form-field",12),v.Tb(23,"mat-label"),v.Bc(24,"Status"),v.Sb(),v.Tb(25,"mat-select",14),v.Tb(26,"mat-option",15),v.Bc(27," In Active "),v.Sb(),v.Tb(28,"mat-option",15),v.Bc(29," Active "),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Tb(30,"div",11),v.Tb(31,"mat-form-field",12),v.Tb(32,"mat-label"),v.Bc(33,"User Type"),v.Sb(),v.Tb(34,"mat-select",16),v.Ac(35,P,2,2,"mat-option",17),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Tb(36,"div",2),v.Tb(37,"div",3),v.Tb(38,"button",18),v.ac("click",(function(){return t.applyFilter()})),v.Bc(39,"Search"),v.Sb(),v.Tb(40,"button",19),v.Bc(41,"Create New Employee"),v.Sb(),v.Tb(42,"button",18),v.ac("click",(function(){return t.restFilter()})),v.Bc(43,"Reset Filter"),v.Sb(),v.Ob(44,"div",20),v.Sb(),v.Sb(),v.Sb(),v.Tb(45,"h4",10),v.Tb(46,"span"),v.Bc(47,"Employees List"),v.Sb(),v.Sb(),v.Tb(48,"div",21),v.Tb(49,"div",22),v.Tb(50,"table",23),v.Rb(51,24),v.Ac(52,x,2,0,"th",25),v.Ac(53,M,2,1,"td",26),v.Qb(),v.Rb(54,27),v.Ac(55,$,2,0,"th",25),v.Ac(56,U,2,1,"td",26),v.Qb(),v.Rb(57,28),v.Ac(58,L,2,0,"th",25),v.Ac(59,V,2,1,"td",26),v.Qb(),v.Rb(60,29),v.Ac(61,G,2,0,"th",25),v.Ac(62,Q,2,1,"td",26),v.Qb(),v.Rb(63,30),v.Ac(64,z,2,0,"th",25),v.Ac(65,H,2,1,"td",26),v.Qb(),v.Rb(66,31),v.Ac(67,_,2,0,"th",25),v.Ac(68,K,9,2,"td",26),v.Qb(),v.Ac(69,X,1,0,"tr",32),v.Ac(70,W,1,0,"tr",33),v.Ac(71,Z,3,0,"tr",34),v.Sb(),v.Tb(72,"mat-paginator",35),v.ac("page",(function(e){return t.changePage(e)})),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb()),2&e&&(v.Bb(11),v.kc("formGroup",t.filterForm),v.Bb(3),v.Dc("","Filter Employees"," "),v.Bb(12),v.kc("value",0),v.Bb(2),v.kc("value",1),v.Bb(7),v.kc("ngForOf",t.roles),v.Bb(5),v.kc("routerLink",v.lc(12,Y)),v.Bb(10),v.kc("dataSource",t.dataSource),v.Bb(19),v.kc("matHeaderRowDef",t.displayedColumns),v.Bb(1),v.kc("matRowDefColumns",t.displayedColumns),v.Bb(2),v.kc("length",t.totalCount)("pageIndex",t.getFilterFormControlByName("pageNumber").value-1)("pageSize",t.getFilterFormControlByName("pageSize").value))},directives:[a.v,a.p,a.h,c.c,c.f,m.b,a.c,a.o,a.f,u.a,s.n,i.k,n.b,f.e,p.k,p.c,p.e,p.b,p.g,p.j,p.h,d.a,p.d,p.a,i.l,b.a,p.f,p.i],styles:[""]}),e})(),path:"list-employees"},{component:(()=>{class e{constructor(e,t,o,i,r,n){this.baseService=e,this.spinner=t,this.yesNoDialog=o,this.router=i,this.route=r,this.notification=n,this.displayedColumns=["User","Role","actions"],this.loockupsStatuses=D.b,this.roles=[],this.employeeRoles=[],this.employeeForm=new a.g({id:new a.d,fullName:new a.d("",a.u.required),userName:new a.d({value:"",disabled:!0},a.u.required),phoneNumber:new a.d("",[a.u.required]),email:new a.d("",[a.u.required,a.u.email]),roleId:new a.d(1,a.u.required),isActive:new a.d,address:new a.d}),this.roleForm=new a.g({userId:new a.d(""),roleId:new a.d("",a.u.required)}),this.passwordForm=new a.g({password:new a.d("",[a.u.required,a.u.minLength(6)]),emailAddress:new a.d("",a.u.required)})}ngOnInit(){this.route.params.subscribe(e=>{this.employeeId=e.employeeId,this.getEmployee(e.employeeId),this.getRoles()})}getEmployeeRole(e){this.baseService.getEmployeeRoles(e).subscribe(e=>{this.employeeRoles=e,this.dataSource=new p.l(this.employeeRoles)})}addEmployeeRoles(){const e=this.roleForm.getRawValue();this.baseService.AddEmployeeRoles(e).subscribe(e=>{this.notification.showNotification("Role Added Successfully","success"),this.getEmployeeRole(this.employeeId),this.roleForm.get("roleId").reset()},e=>{this.notification.showNotification("something went wrong please contact your administrator","danger")})}getRoleNameById(e){const t=this.roles.find(t=>t.id==e);return t?t.name:t}removeEmployeeRoles(e,t){this.baseService.removeEmployeeRoles({userId:e,roleId:t}).subscribe(e=>{this.notification.showNotification("Role Deleted Successfully","success"),this.getEmployeeRole(this.employeeId)},e=>{this.notification.showNotification("something went wrong please contact your administrator","danger")})}getRoles(){this.baseService.getEmployeesRoles().subscribe(e=>{this.roles=e})}getEmployee(e){this.spinner.show(),this.baseService.getById(O.b.Employee,e).subscribe(t=>{this.employee=t,this.getEmployeeRole(e),this.getPasswordFormControlByName("emailAddress").setValue(this.employee.email),this.roleForm.get("userId").setValue(this.employee.id),console.log(this.employee),this.employeeForm.patchValue(this.employee),this.spinner.hide()})}getFormControlByName(e){return this.employeeForm.get(e)}getPasswordFormControlByName(e){return this.passwordForm.get(e)}submitForm(e){this.employeeForm.invalid?(this.employeeForm.markAllAsTouched(),this.notification.showNotification("Please Check Form Fields","warning")):(null===e&&void 0===e||this.getFormControlByName("isActive").setValue(e),this.baseService.updateEmployeeInfo(this.employeeForm.value).subscribe(e=>{this.notification.showNotification("Employee Modified Successfully","success"),this.router.navigate(["/employees-management/list-employees"]),this.getEmployee(this.employeeId)},e=>{console.log(e),this.notification.showNotification(400===e.status?e.error.Message:"Something went wrong please contact system admin","danger"),this.spinner.hide()}))}changePassword(){this.passwordForm.invalid?(this.passwordForm.markAllAsTouched(),this.notification.showNotification("Please Check Password Field","warning")):this.baseService.postItem(O.b.Employee,O.a.ChangePassword,this.passwordForm.value).subscribe(e=>{this.notification.showNotification("Employee Password Modified Successfully","success"),this.passwordForm.reset()},e=>{console.log(e),this.notification.showNotification(400===e.status?e.error.Message:"Something went wrong please contact system admin","danger"),this.spinner.hide()})}}return e.\u0275fac=function(t){return new(t||e)(v.Nb(T.a),v.Nb(w.c),v.Nb(l.b),v.Nb(f.d),v.Nb(f.a),v.Nb(y.a))},e.\u0275cmp=v.Hb({type:e,selectors:[["app-view-edit-employee"]],decls:79,vars:14,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-primary"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[3,"formGroup"],[1,"col-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","fullName","placeholder","Full Name"],[4,"ngIf"],["matInput","","formControlName","email","placeholder","Email"],["matInput","","formControlName","phoneNumber","placeholder","Phone Number"],["matInput","","formControlName","address","placeholder","Address"],["mat-raised-button","","type","submit",1,"btn","btn-primary","pull-right",3,"disabled","click"],[1,"clearfix"],["matInput","","type","password","formControlName","password","placeholder","Change Employee Password"],["mat-raised-button","","type","submit",1,"btn","btn-primary","pull-left",3,"disabled","click"],["formControlName","roleId"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"mat-elevation-z8","w-100"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","User"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Role"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["class","data-row","mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-icon-button","","aria-label","Deactivate",1,"btn","btn-danger","m-2",3,"click"],["mat-header-row",""],["mat-row","",1,"data-row"]],template:function(e,t){1&e&&(v.Tb(0,"div",0),v.Tb(1,"div",1),v.Tb(2,"div",2),v.Tb(3,"div",3),v.Tb(4,"div",4),v.Tb(5,"div",5),v.Tb(6,"h3",6),v.Bc(7,"Employee Management"),v.Sb(),v.Tb(8,"p",7),v.Bc(9,"Edit Employee"),v.Sb(),v.Sb(),v.Tb(10,"div",8),v.Tb(11,"form",9),v.Tb(12,"div",2),v.Tb(13,"div",10),v.Tb(14,"mat-form-field",11),v.Tb(15,"mat-label"),v.Bc(16,"Full Name"),v.Sb(),v.Ob(17,"input",12),v.Ac(18,ee,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Tb(19,"div",10),v.Tb(20,"mat-form-field",11),v.Tb(21,"mat-label"),v.Bc(22,"Email"),v.Sb(),v.Ob(23,"input",14),v.Ac(24,te,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Tb(25,"div",10),v.Tb(26,"mat-form-field",11),v.Tb(27,"mat-label"),v.Bc(28,"Phone Number"),v.Sb(),v.Ob(29,"input",15),v.Ac(30,oe,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Tb(31,"div",10),v.Tb(32,"mat-form-field",11),v.Tb(33,"mat-label"),v.Bc(34,"Address"),v.Sb(),v.Ob(35,"input",16),v.Sb(),v.Sb(),v.Sb(),v.Tb(36,"button",17),v.ac("click",(function(){return t.submitForm(t.employee.isActive)})),v.Bc(37,"Save Changes"),v.Sb(),v.Ob(38,"div",18),v.Sb(),v.Ob(39,"br"),v.Ob(40,"hr"),v.Tb(41,"form",9),v.Tb(42,"div",2),v.Tb(43,"div",10),v.Tb(44,"mat-form-field",11),v.Tb(45,"mat-label"),v.Bc(46,"New Password"),v.Sb(),v.Ob(47,"input",19),v.Ac(48,ie,2,0,"mat-error",13),v.Sb(),v.Sb(),v.Tb(49,"div",10),v.Tb(50,"button",20),v.ac("click",(function(){return t.changePassword()})),v.Bc(51,"Change Password"),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Ob(52,"br"),v.Ob(53,"hr"),v.Tb(54,"form",9),v.Tb(55,"div",2),v.Tb(56,"div",10),v.Tb(57,"mat-form-field",11),v.Tb(58,"mat-label"),v.Bc(59,"Roles"),v.Sb(),v.Tb(60,"mat-select",21),v.Ac(61,re,2,2,"mat-option",22),v.Sb(),v.Sb(),v.Sb(),v.Tb(62,"div",10),v.Tb(63,"button",20),v.ac("click",(function(){return t.addEmployeeRoles()})),v.Bc(64,"Add Role"),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Tb(65,"div",23),v.Tb(66,"div",24),v.Tb(67,"table",25),v.Rb(68,26),v.Ac(69,ae,2,0,"th",27),v.Ac(70,ne,2,1,"td",28),v.Qb(),v.Rb(71,29),v.Ac(72,se,2,0,"th",27),v.Ac(73,le,2,1,"td",28),v.Qb(),v.Rb(74,30),v.Ac(75,ce,2,0,"th",27),v.Ac(76,be,4,0,"td",28),v.Qb(),v.Ac(77,me,1,0,"tr",31),v.Ac(78,de,1,0,"tr",32),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb()),2&e&&(v.Bb(11),v.kc("formGroup",t.employeeForm),v.Bb(7),v.kc("ngIf",t.getFormControlByName("fullName").touched&&t.getFormControlByName("fullName").invalid),v.Bb(6),v.kc("ngIf",t.getFormControlByName("email").touched&&t.getFormControlByName("email").invalid),v.Bb(6),v.kc("ngIf",t.getFormControlByName("phoneNumber").touched&&t.getFormControlByName("phoneNumber").invalid),v.Bb(6),v.kc("disabled",t.employeeForm.invalid),v.Bb(5),v.kc("formGroup",t.passwordForm),v.Bb(7),v.kc("ngIf",t.getPasswordFormControlByName("password").touched&&t.getPasswordFormControlByName("password").invalid),v.Bb(2),v.kc("disabled",t.passwordForm.invalid),v.Bb(4),v.kc("formGroup",t.roleForm),v.Bb(7),v.kc("ngForOf",t.roles),v.Bb(2),v.kc("disabled",t.roleForm.invalid),v.Bb(4),v.kc("dataSource",t.dataSource),v.Bb(10),v.kc("matHeaderRowDef",t.displayedColumns),v.Bb(1),v.kc("matRowDefColumns",t.displayedColumns))},directives:[a.v,a.p,a.h,c.c,c.f,m.b,a.c,a.o,a.f,i.l,n.b,u.a,i.k,p.k,p.c,p.e,p.b,p.g,p.j,c.b,s.n,p.d,p.a,b.a,p.f,p.i],styles:[".mat-cell[_ngcontent-%COMP%]{width:30%}form[_ngcontent-%COMP%]{overflow-x:hidden}"]}),e})(),path:"view-edit-employees/:employeeId"},{component:E,path:"create-new-employee"}];let pe=(()=>{class e{}return e.\u0275mod=v.Lb({type:e}),e.\u0275inj=v.Kb({factory:function(t){return new(t||e)},providers:[g.a,{provide:r.a,useClass:S.a,multi:!0}],imports:[[i.c,a.i,a.t,n.c,s.t,c.e,m.c,u.b,h.b,p.m,d.b,b.b,l.f,f.h.forChild(ue)]]}),e})()}}]);