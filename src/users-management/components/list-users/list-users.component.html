<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h3 class="card-title ">Users</h3>
                        <p class="card-category"> Users Management</p>
                    </div>
                    <div class="card-body">
                        <form [formGroup]="filterForm">
                            <h4 class="background"><span>{{'Filter Users'}} </span>
                            </h4>
                            <div class="row">
                                <div class="col">
                                    <mat-form-field class="example-full-width" appearance="outline">
                                        <mat-label>Filter By Text</mat-label>
                                        <input matInput formControlName="searchValue"
                                            placeholder="Name , UserName , Email , Phone Number ...">
                                    </mat-form-field>
                                </div>
                                <!-- <div class="col">
                                    <mat-form-field class="example-full-width" appearance="outline">
                                        <mat-label>Status</mat-label>
                                        <mat-select formControlName="status" name="status">
                                            <mat-option *ngFor="let status of loockupsStatuses" [value]="status.id">
                                              {{status.name}}
                                            </mat-option>
                                          </mat-select>
                                    </mat-form-field>
                                </div> -->
                                <div class="col">
                                    <mat-form-field class="example-full-width" appearance="outline">
                                        <mat-label>User Type</mat-label>
                                        <mat-select formControlName="roleType" name="roleType">
                                            <mat-option *ngFor="let role of roles" [value]="role.id">
                                                {{role.name}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col">
                                    <mat-form-field class="example-full-width" appearance="outline">
                                        <mat-label>Remaining Subscription</mat-label>
                                        <input matInput formControlName="remainingSubscription"
                                            placeholder="Remaining Subscription ...." type="number">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <button mat-raised-button class="btn btn-primary pull-right" (click)="applyFilter()"
                                        style="margin: 1px;">Search</button>
                                    <button mat-raised-button class="btn btn-primary pull-right" (click)="restFilter()"
                                        style="margin: 1px;">Reset Filter</button>
                                    <div class="clearfix"></div>
                                </div>
                            </div>

                        </form>
                        <h4 class="background"><span>Users List</span></h4>
                        <div class="table-responsive">
                            <div class="mat-elevation-z8 w-100">
                                <table class="w-100" mat-table [dataSource]="dataSource" matSort>

                                    <!-- Name Column -->
                                    <ng-container matColumnDef="name">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                                        <td mat-cell *matCellDef="let row"> {{row.fullName}} </td>
                                    </ng-container>

                                    <!-- UserName Column -->
                                    <ng-container matColumnDef="userName">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> UserName </th>
                                        <td mat-cell *matCellDef="let row"> {{row.userName}} </td>
                                    </ng-container>
                                    <!-- Email Column -->
                                    <ng-container matColumnDef="email">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
                                        <td mat-cell *matCellDef="let row"> {{row.email}} </td>
                                    </ng-container>
                                    <!-- PhoneNumber Column -->
                                    <ng-container matColumnDef="phoneNumber">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone Number </th>
                                        <td mat-cell *matCellDef="let row"> {{row.phoneNumber}} </td>
                                    </ng-container>
                                    <!-- IsActive Column -->
                                    <ng-container matColumnDef="isActive">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                                        <td mat-cell *matCellDef="let row"> {{row.isActive?'Active':'In Active'}} </td>
                                    </ng-container>
                                    <!-- Actions Column -->
                                    <ng-container matColumnDef="actions">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Actions </th>
                                        <td mat-cell *matCellDef="let row">
                                            <button (click)="updateUserStatus(row,false)" class="btn btn-warning m-2"
                                                *ngIf="row.isActive" mat-icon-button aria-label="Deactivate">
                                                <mat-icon>block</mat-icon>
                                            </button>
                                            <button (click)="updateUserStatus(row,true)" class="btn btn-success m-2"
                                                *ngIf="!row.isActive" mat-icon-button aria-label="Activate">
                                                <mat-icon>check</mat-icon>
                                            </button>
                                            <button (click)="delete(row.id)" class="btn btn-danger m-2" mat-icon-button
                                                aria-label="Deactivate">
                                                <mat-icon>delete_forever</mat-icon>
                                            </button>

                                            <button (click)="editItem(row.id)" class="btn btn-primary m-2"
                                                mat-icon-button aria-label="Edit">
                                                <mat-icon>create</mat-icon>
                                            </button>
                                        </td>

                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr class="data-row" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                                    <!-- Row shown when there is no matching data. -->
                                    <tr class="mat-row" *matNoDataRow>
                                        <td class="mat-cell" colspan="4">No data matching the filter
                                        </td>
                                    </tr>
                                </table>
                                <mat-paginator (page)="changePage($event)" [length]="totalCount"
                                    [pageIndex]="getFilterFormControlByName('pageNumber').value-1"
                                    [pageSize]="getFilterFormControlByName('pageSize').value"></mat-paginator>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>